{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Burak\\\\Desktop\\\\cloud_mvp\\\\frontend\\\\src\\\\components\\\\SearchEngine.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport './SearchEngine.css'; // Gerekli CSS dosyasƒ±\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SearchEngine = () => {\n  _s();\n  const videoRefs = useRef(new Map());\n  const videoTimeoutRef = useRef(null); // Timeout ID'yi tutmak i√ßin\n  const [query, setQuery] = useState('');\n  const [searchType, setSearchType] = useState('all');\n  const [results, setResults] = useState({\n    fileshares: []\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [hasSearched, setHasSearched] = useState(false);\n  const [activeVideoPreview, setActiveVideoPreview] = useState(null); // ‚úÖ Move useState to top level\n\n  // DEBUG: Dosya kontrol√º (Yerinde Kalmalƒ±)\n  useEffect(() => {\n    const checkPublicFiles = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await fetch('http://localhost:8001/api/files/', {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        if (response.ok) {\n          const files = await response.json();\n          console.log('Kullanƒ±cƒ± dosyalarƒ±:', files);\n        }\n      } catch (error) {\n        console.error('Dosya kontrol hatasƒ±:', error);\n      }\n    };\n    checkPublicFiles();\n  }, []);\n  const setVideoRef = (fileId, element) => {\n    if (element) {\n      videoRefs.current.set(fileId, element);\n    } else {\n      videoRefs.current.delete(fileId);\n    }\n  };\n  const handleVideoMouseEnter = fileId => {\n    const videoElement = videoRefs.current.get(fileId);\n    if (videoElement) {\n      // √ñnceki zamanlayƒ±cƒ±yƒ± temizle\n      if (videoTimeoutRef.current) {\n        clearTimeout(videoTimeoutRef.current);\n      }\n\n      // Oynatmayƒ± dene\n      videoElement.play().catch(e => console.log(\"Video Play Error:\", e));\n\n      // 5 saniye sonra durdurma mantƒ±ƒüƒ±nƒ± ayarla\n      videoTimeoutRef.current = setTimeout(() => {\n        // Eƒüer video hala bu element ise durdur.\n        if (videoElement) {\n          videoElement.pause();\n          videoElement.currentTime = 0; // Ba≈üa sar\n        }\n      }, 5000); // 5 saniye\n    }\n  };\n\n  // 3. Fare Video Alanƒ±ndan √áƒ±ktƒ±ƒüƒ±nda\n  const handleVideoMouseLeave = fileId => {\n    const videoElement = videoRefs.current.get(fileId);\n    if (videoElement) {\n      // Zamanlayƒ±cƒ±yƒ± hemen temizle\n      if (videoTimeoutRef.current) {\n        clearTimeout(videoTimeoutRef.current);\n      }\n\n      // Durdur ve ba≈üa sar\n      videoElement.pause();\n      videoElement.currentTime = 0;\n    }\n  };\n\n  // ‚úÖ YARDIMCI FONKSƒ∞YON: Dosya Tipine G√∂re ƒ∞kon Belirleme\n  const getFileIcon = fileName => {\n    if (!fileName) return 'fa-file';\n    const ext = fileName.split('.').pop().toLowerCase();\n    const iconMap = {\n      jpg: 'fa-file-image',\n      jpeg: 'fa-file-image',\n      png: 'fa-file-image',\n      gif: 'fa-file-image',\n      pdf: 'fa-file-pdf',\n      doc: 'fa-file-word',\n      docx: 'fa-file-word',\n      xls: 'fa-file-excel',\n      xlsx: 'fa-file-excel',\n      ppt: 'fa-file-powerpoint',\n      pptx: 'fa-file-powerpoint',\n      zip: 'fa-file-archive',\n      rar: 'fa-file-archive',\n      mp3: 'fa-file-audio',\n      wav: 'fa-file-audio',\n      mp4: 'fa-file-video',\n      avi: 'fa-file-video',\n      txt: 'fa-file-alt',\n      js: 'fa-file-code',\n      html: 'fa-file-code',\n      css: 'fa-file-code',\n      default: 'fa-file'\n    };\n    return iconMap[ext] || iconMap.default;\n  };\n\n  // ‚úÖ YENƒ∞ YARDIMCI FONKSƒ∞YON: Dosya tipine g√∂re √∂nizleme i√ßeriƒüini olu≈üturan fonksiyon\n  const renderFilePreview = fileShare => {\n    const previewSrc = fileShare.preview_url || fileShare.file_url;\n    const fileExtension = fileShare.file_name ? fileShare.file_name.split('.').pop().toLowerCase() : '';\n    const isImage = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp'].includes(fileExtension);\n    const isVideo = ['mp4', 'mov', 'avi', 'wmv', 'flv', 'webm'].includes(fileExtension);\n    const isAudio = ['mp3', 'wav', 'ogg', 'aac'].includes(fileExtension);\n    const isPdf = ['pdf'].includes(fileExtension);\n    if (isImage && previewSrc) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"file-preview-content\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: previewSrc,\n          alt: fileShare.file_name,\n          className: \"preview-image-tag\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this);\n    }\n    if (isVideo && previewSrc) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"file-preview-content\",\n        onMouseEnter: () => handleVideoMouseEnter(fileShare.id),\n        onMouseLeave: () => handleVideoMouseLeave(fileShare.id),\n        children: /*#__PURE__*/_jsxDEV(\"video\", {\n          ref: el => setVideoRef(fileShare.id, el),\n          muted: true,\n          loop: false,\n          preload: \"metadata\",\n          className: \"preview-video\",\n          children: /*#__PURE__*/_jsxDEV(\"source\", {\n            src: previewSrc,\n            type: `video/${fileExtension}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this);\n    } else if (isAudio) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"file-preview-content audio-preview\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"preview-icon-large\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-music\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this);\n    } else if (isPdf && previewSrc) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"file-preview-content pdf-preview\",\n        children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n          src: previewSrc,\n          title: fileShare.file_name,\n          className: \"preview-iframe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"file-preview-content document-preview\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `preview-icon-large`,\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: `fas ${getFileIcon(fileShare.file_name)}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }, this);\n    }\n  };\n\n  // 1. ‚úÖ YARDIMCI FONKSƒ∞YON: Arama Sonu√ßlarƒ±nƒ± Temizle\n  const handleClear = () => {\n    setQuery('');\n    setResults({\n      fileshares: []\n    });\n    setHasSearched(false);\n    setError('');\n  };\n\n  // 2. ‚úÖ ANA FONKSƒ∞YON: Arama ƒ∞≈ülemi (API ve JSON Hata √á√∂z√ºmleri Dahil)\n  const handleSearch = async e => {\n    e.preventDefault();\n    if (!query.trim()) return;\n    setLoading(true);\n    setError('');\n    setHasSearched(true);\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://localhost:8001/api/search/?q=${encodeURIComponent(query)}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(`Arama hatasƒ±: ${errorData.message || response.status}`);\n      }\n      const data = await response.json();\n      const searchResults = data.results || data;\n      const allFiles = [...(searchResults.files || []), ...(searchResults.group_files || [])];\n      setResults({\n        fileshares: allFiles\n      });\n    } catch (err) {\n      console.error('Arama sƒ±rasƒ±nda bir hata olu≈ütu:', err);\n      setError(err.message || 'Arama sƒ±rasƒ±nda beklenmeyen bir hata olu≈ütu.');\n      setResults({\n        fileshares: []\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 3. ‚úÖ RENDER FONKSƒ∞YONU: √ñnizleme ve Tasarƒ±m\n  const renderSearchResults = () => {\n    const {\n      fileshares\n    } = results;\n    if (loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-state\",\n        children: \"\\uD83D\\uDD0D Herkese A\\xE7\\u0131k Dosyalar Aran\\u0131yor...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 20\n      }, this);\n    }\n    if (fileshares.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-results\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-results-icon\",\n          children: \"\\uD83E\\uDD37\\u200D\\u2642\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Sonu\\xE7 bulunamad\\u0131\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Arad\\u0131\\u011F\\u0131n\\u0131z anahtar kelimeye uygun herkese a\\xE7\\u0131k dosya bulunamad\\u0131.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"results-grid\",\n      children: fileshares.map(fileShare => {\n        let clickUrl = fileShare.share_url || fileShare.file_url || '#';\n        if (clickUrl !== '#' && !clickUrl.endsWith('/')) {\n          clickUrl += '/'; // üö® URL'nin sonuna eƒüik √ßizgiyi ekle\n        }\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"result-card\",\n          onClick: () => {\n            if (clickUrl && clickUrl !== '#') {\n              window.open(clickUrl, '_blank');\n            } else {\n              console.warn(\"Tƒ±klama i√ßin ge√ßerli URL bulunamadƒ±.\");\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"file-preview-container\",\n            children: renderFilePreview(fileShare)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"result-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              title: fileShare.file_name,\n              children: fileShare.file_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"file-owner\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-user\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 59\n              }, this), \" \", fileShare.created_by_username || 'Anonim']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"file-stats\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-clock\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 60\n                }, this), \" \", fileShare.upload_time_ago || 'Tarih Yok']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-eye\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 60\n                }, this), \" \", fileShare.view_count || 0]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"file-badges\",\n              children: [fileShare.is_one_time_view && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"badge badge-one-time\",\n                children: \"Tek G\\xF6sterimlik\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 41\n              }, this), fileShare.is_password_protected && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"badge badge-password\",\n                children: \"\\u015Eifreli\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 29\n          }, this)]\n        }, fileShare.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 25\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 13\n    }, this);\n  };\n\n  // Component Return\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-engine\",\n    \"data-theme\": \"dark\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"search-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Herkese A\\xE7\\u0131k Dosya Arama Motoru\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Milyonlarca payla\\u015F\\u0131lan dosya aras\\u0131nda arama yap\\u0131n.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"search-form\",\n      onSubmit: handleSearch,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: query,\n          onChange: e => setQuery(e.target.value),\n          placeholder: \"Dosya ad\\u0131, kullan\\u0131c\\u0131 ad\\u0131...\",\n          className: \"search-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"search-btn\",\n          disabled: loading || !query.trim(),\n          children: loading ? 'üîç Aranƒ±yor...' : 'üîç Ara'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 21\n        }, this), hasSearched && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleClear,\n          className: \"clear-btn\",\n          children: \"\\u2716 Temizle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: [\"\\u274C \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-results\",\n      children: hasSearched || loading ? renderSearchResults() : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-placeholder\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"placeholder-icon\",\n          children: \"\\uD83D\\uDD0D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Arama yap\\u0131n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Herkese a\\xE7\\u0131k dosyalar\\u0131 bulmak i\\xE7in yukar\\u0131dan arama yap\\u0131n.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 307,\n    columnNumber: 9\n  }, this);\n};\n_s(SearchEngine, \"B8OEk0mklhimpF0idTGmsngiSAM=\");\n_c = SearchEngine;\nexport default SearchEngine;\nvar _c;\n$RefreshReg$(_c, \"SearchEngine\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","SearchEngine","_s","videoRefs","Map","videoTimeoutRef","query","setQuery","searchType","setSearchType","results","setResults","fileshares","loading","setLoading","error","setError","hasSearched","setHasSearched","activeVideoPreview","setActiveVideoPreview","checkPublicFiles","token","localStorage","getItem","response","fetch","headers","ok","files","json","console","log","setVideoRef","fileId","element","current","set","delete","handleVideoMouseEnter","videoElement","get","clearTimeout","play","catch","e","setTimeout","pause","currentTime","handleVideoMouseLeave","getFileIcon","fileName","ext","split","pop","toLowerCase","iconMap","jpg","jpeg","png","gif","pdf","doc","docx","xls","xlsx","ppt","pptx","zip","rar","mp3","wav","mp4","avi","txt","js","html","css","default","renderFilePreview","fileShare","previewSrc","preview_url","file_url","fileExtension","file_name","isImage","includes","isVideo","isAudio","isPdf","className","children","src","alt","_jsxFileName","lineNumber","columnNumber","onMouseEnter","id","onMouseLeave","ref","el","muted","loop","preload","type","title","handleClear","handleSearch","preventDefault","trim","encodeURIComponent","errorData","Error","message","status","data","searchResults","allFiles","group_files","err","renderSearchResults","length","map","clickUrl","share_url","endsWith","onClick","window","open","warn","created_by_username","upload_time_ago","view_count","is_one_time_view","is_password_protected","onSubmit","value","onChange","target","placeholder","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Burak/Desktop/cloud_mvp/frontend/src/components/SearchEngine.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport './SearchEngine.css'; // Gerekli CSS dosyasƒ±\r\n\r\nconst SearchEngine = () => {\r\n    const videoRefs = useRef(new Map());\r\n    const videoTimeoutRef = useRef(null); // Timeout ID'yi tutmak i√ßin\r\n    const [query, setQuery] = useState('');\r\n    const [searchType, setSearchType] = useState('all');\r\n    const [results, setResults] = useState({ fileshares: [] });\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [hasSearched, setHasSearched] = useState(false);\r\n    const [activeVideoPreview, setActiveVideoPreview] = useState(null); // ‚úÖ Move useState to top level\r\n\r\n    // DEBUG: Dosya kontrol√º (Yerinde Kalmalƒ±)\r\n    useEffect(() => {\r\n        const checkPublicFiles = async () => {\r\n            try {\r\n                const token = localStorage.getItem('token');\r\n                const response = await fetch('http://localhost:8001/api/files/', {\r\n                    headers: { 'Authorization': `Bearer ${token}` },\r\n                });\r\n                if (response.ok) {\r\n                    const files = await response.json();\r\n                    console.log('Kullanƒ±cƒ± dosyalarƒ±:', files);\r\n                }\r\n            } catch (error) {\r\n                console.error('Dosya kontrol hatasƒ±:', error);\r\n            }\r\n        };\r\n        checkPublicFiles();\r\n    }, []);\r\n\r\n    const setVideoRef = (fileId, element) => {\r\n        if (element) {\r\n            videoRefs.current.set(fileId, element);\r\n        } else {\r\n            videoRefs.current.delete(fileId);\r\n        }\r\n    };\r\n\r\n    const handleVideoMouseEnter = (fileId) => {\r\n        const videoElement = videoRefs.current.get(fileId);\r\n\r\n        if (videoElement) {\r\n            // √ñnceki zamanlayƒ±cƒ±yƒ± temizle\r\n            if (videoTimeoutRef.current) {\r\n                clearTimeout(videoTimeoutRef.current);\r\n            }\r\n\r\n            // Oynatmayƒ± dene\r\n            videoElement.play().catch(e => console.log(\"Video Play Error:\", e));\r\n\r\n            // 5 saniye sonra durdurma mantƒ±ƒüƒ±nƒ± ayarla\r\n            videoTimeoutRef.current = setTimeout(() => {\r\n                // Eƒüer video hala bu element ise durdur.\r\n                if (videoElement) {\r\n                    videoElement.pause();\r\n                    videoElement.currentTime = 0; // Ba≈üa sar\r\n                }\r\n            }, 5000); // 5 saniye\r\n        }\r\n    };\r\n\r\n    // 3. Fare Video Alanƒ±ndan √áƒ±ktƒ±ƒüƒ±nda\r\n    const handleVideoMouseLeave = (fileId) => {\r\n        const videoElement = videoRefs.current.get(fileId);\r\n\r\n        if (videoElement) {\r\n            // Zamanlayƒ±cƒ±yƒ± hemen temizle\r\n            if (videoTimeoutRef.current) {\r\n                clearTimeout(videoTimeoutRef.current);\r\n            }\r\n\r\n            // Durdur ve ba≈üa sar\r\n            videoElement.pause();\r\n            videoElement.currentTime = 0;\r\n        }\r\n    };\r\n\r\n    // ‚úÖ YARDIMCI FONKSƒ∞YON: Dosya Tipine G√∂re ƒ∞kon Belirleme\r\n    const getFileIcon = (fileName) => {\r\n        if (!fileName) return 'fa-file';\r\n        const ext = fileName.split('.').pop().toLowerCase();\r\n        const iconMap = {\r\n            jpg: 'fa-file-image',\r\n            jpeg: 'fa-file-image',\r\n            png: 'fa-file-image',\r\n            gif: 'fa-file-image',\r\n            pdf: 'fa-file-pdf',\r\n            doc: 'fa-file-word',\r\n            docx: 'fa-file-word',\r\n            xls: 'fa-file-excel',\r\n            xlsx: 'fa-file-excel',\r\n            ppt: 'fa-file-powerpoint',\r\n            pptx: 'fa-file-powerpoint',\r\n            zip: 'fa-file-archive',\r\n            rar: 'fa-file-archive',\r\n            mp3: 'fa-file-audio',\r\n            wav: 'fa-file-audio',\r\n            mp4: 'fa-file-video',\r\n            avi: 'fa-file-video',\r\n            txt: 'fa-file-alt',\r\n            js: 'fa-file-code',\r\n            html: 'fa-file-code',\r\n            css: 'fa-file-code',\r\n            default: 'fa-file'\r\n        };\r\n        return iconMap[ext] || iconMap.default;\r\n    };\r\n\r\n    // ‚úÖ YENƒ∞ YARDIMCI FONKSƒ∞YON: Dosya tipine g√∂re √∂nizleme i√ßeriƒüini olu≈üturan fonksiyon\r\n    const renderFilePreview = (fileShare) => {\r\n        const previewSrc = fileShare.preview_url || fileShare.file_url;\r\n\r\n        const fileExtension = fileShare.file_name ? fileShare.file_name.split('.').pop().toLowerCase() : '';\r\n        const isImage = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp'].includes(fileExtension);\r\n        const isVideo = ['mp4', 'mov', 'avi', 'wmv', 'flv', 'webm'].includes(fileExtension);\r\n        const isAudio = ['mp3', 'wav', 'ogg', 'aac'].includes(fileExtension);\r\n        const isPdf = ['pdf'].includes(fileExtension);\r\n\r\n        if (isImage && previewSrc) {\r\n            return (\r\n                <div className=\"file-preview-content\">\r\n                    <img\r\n                        src={previewSrc}\r\n                        alt={fileShare.file_name}\r\n                        className=\"preview-image-tag\"\r\n                    />\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (isVideo && previewSrc) {\r\n            return (\r\n                <div\r\n                    className=\"file-preview-content\"\r\n                    onMouseEnter={() => handleVideoMouseEnter(fileShare.id)}\r\n                    onMouseLeave={() => handleVideoMouseLeave(fileShare.id)}\r\n                >\r\n                    <video\r\n                        ref={el => setVideoRef(fileShare.id, el)}\r\n                        muted\r\n                        loop={false}\r\n                        preload=\"metadata\"\r\n                        className=\"preview-video\"\r\n                    >\r\n                        <source src={previewSrc} type={`video/${fileExtension}`} />\r\n                    </video>\r\n                </div>\r\n            );\r\n        } else if (isAudio) {\r\n            return (\r\n                <div className=\"file-preview-content audio-preview\">\r\n                    <div className=\"preview-icon-large\">\r\n                        <i className=\"fas fa-music\"></i>\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else if (isPdf && previewSrc) {\r\n            return (\r\n                <div className=\"file-preview-content pdf-preview\">\r\n                    <iframe\r\n                        src={previewSrc}\r\n                        title={fileShare.file_name}\r\n                        className=\"preview-iframe\"\r\n                    />\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"file-preview-content document-preview\">\r\n                    <div className={`preview-icon-large`}>\r\n                        <i className={`fas ${getFileIcon(fileShare.file_name)}`}></i>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n\r\n    // 1. ‚úÖ YARDIMCI FONKSƒ∞YON: Arama Sonu√ßlarƒ±nƒ± Temizle\r\n    const handleClear = () => {\r\n        setQuery('');\r\n        setResults({ fileshares: [] });\r\n        setHasSearched(false);\r\n        setError('');\r\n    };\r\n\r\n    // 2. ‚úÖ ANA FONKSƒ∞YON: Arama ƒ∞≈ülemi (API ve JSON Hata √á√∂z√ºmleri Dahil)\r\n    const handleSearch = async (e) => {\r\n        e.preventDefault();\r\n        if (!query.trim()) return;\r\n\r\n        setLoading(true);\r\n        setError('');\r\n        setHasSearched(true);\r\n\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n\r\n            const response = await fetch(\r\n                `http://localhost:8001/api/search/?q=${encodeURIComponent(query)}`,\r\n                {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${token}`,\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                }\r\n            );\r\n\r\n            if (!response.ok) {\r\n                const errorData = await response.json();\r\n                throw new Error(`Arama hatasƒ±: ${errorData.message || response.status}`);\r\n            }\r\n\r\n            const data = await response.json();\r\n\r\n            const searchResults = data.results || data;\r\n\r\n            const allFiles = [\r\n                ...(searchResults.files || []),\r\n                ...(searchResults.group_files || [])\r\n            ];\r\n\r\n            setResults({ fileshares: allFiles });\r\n\r\n        } catch (err) {\r\n            console.error('Arama sƒ±rasƒ±nda bir hata olu≈ütu:', err);\r\n            setError(err.message || 'Arama sƒ±rasƒ±nda beklenmeyen bir hata olu≈ütu.');\r\n            setResults({ fileshares: [] });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // 3. ‚úÖ RENDER FONKSƒ∞YONU: √ñnizleme ve Tasarƒ±m\r\n    const renderSearchResults = () => {\r\n        const { fileshares } = results;\r\n\r\n        if (loading) {\r\n            return <div className=\"loading-state\">üîç Herkese A√ßƒ±k Dosyalar Aranƒ±yor...</div>;\r\n        }\r\n\r\n        if (fileshares.length === 0) {\r\n            return (\r\n                <div className=\"no-results\">\r\n                    <div className=\"no-results-icon\">ü§∑‚Äç‚ôÇÔ∏è</div>\r\n                    <h3>Sonu√ß bulunamadƒ±</h3>\r\n                    <p>Aradƒ±ƒüƒ±nƒ±z anahtar kelimeye uygun herkese a√ßƒ±k dosya bulunamadƒ±.</p>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"results-grid\">\r\n                {fileshares.map((fileShare) => {\r\n                    let clickUrl = fileShare.share_url || fileShare.file_url || '#';\r\n                    if (clickUrl !== '#' && !clickUrl.endsWith('/')) {\r\n                        clickUrl += '/'; // üö® URL'nin sonuna eƒüik √ßizgiyi ekle\r\n                    }\r\n                    return (\r\n                        <div\r\n                            key={fileShare.id}\r\n                            className=\"result-card\"\r\n                            onClick={() => {\r\n                                if (clickUrl && clickUrl !== '#') {\r\n                                    window.open(clickUrl, '_blank');\r\n                                } else {\r\n                                    console.warn(\"Tƒ±klama i√ßin ge√ßerli URL bulunamadƒ±.\");\r\n                                }\r\n                            }}>\r\n\r\n                            {/* ‚úÖ DOSYA √ñNƒ∞ZLEME ALANI */}\r\n                            <div className=\"file-preview-container\">\r\n                                {renderFilePreview(fileShare)}\r\n                            </div>\r\n\r\n                            {/* DOSYA Bƒ∞LGƒ∞ ALANI */}\r\n                            <div className=\"result-content\">\r\n                                <h4 title={fileShare.file_name}>{fileShare.file_name}</h4>\r\n\r\n                                <p className=\"file-owner\"><i className=\"fas fa-user\"></i> {fileShare.created_by_username || 'Anonim'}</p>\r\n\r\n                                <div className=\"file-stats\">\r\n                                    <span className=\"stat\"><i className=\"fas fa-clock\"></i> {fileShare.upload_time_ago || 'Tarih Yok'}</span>\r\n                                    <span className=\"stat\"><i className=\"fas fa-eye\"></i> {fileShare.view_count || 0}</span>\r\n                                </div>\r\n\r\n                                <div className=\"file-badges\">\r\n                                    {fileShare.is_one_time_view && (\r\n                                        <span className=\"badge badge-one-time\">Tek G√∂sterimlik</span>\r\n                                    )}\r\n                                    {fileShare.is_password_protected && (\r\n                                        <span className=\"badge badge-password\">≈ûifreli</span>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    // Component Return\r\n    return (\r\n        <div className=\"search-engine\" data-theme=\"dark\">\r\n            <header className=\"search-header\">\r\n                <h2>Herkese A√ßƒ±k Dosya Arama Motoru</h2>\r\n                <p>Milyonlarca payla≈üƒ±lan dosya arasƒ±nda arama yapƒ±n.</p>\r\n            </header>\r\n\r\n            <form className=\"search-form\" onSubmit={handleSearch}>\r\n                <div className=\"search-input-group\">\r\n                    <input\r\n                        type=\"text\"\r\n                        value={query}\r\n                        onChange={(e) => setQuery(e.target.value)}\r\n                        placeholder=\"Dosya adƒ±, kullanƒ±cƒ± adƒ±...\"\r\n                        className=\"search-input\"\r\n                    />\r\n\r\n                    <button type=\"submit\" className=\"search-btn\" disabled={loading || !query.trim()}>\r\n                        {loading ? 'üîç Aranƒ±yor...' : 'üîç Ara'}\r\n                    </button>\r\n                    {hasSearched && (\r\n                        <button type=\"button\" onClick={handleClear} className=\"clear-btn\">\r\n                            ‚úñ Temizle\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            </form>\r\n\r\n            {error && (\r\n                <div className=\"error-message\">\r\n                    ‚ùå {error}\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"search-results\">\r\n                {hasSearched || loading ? (\r\n                    renderSearchResults()\r\n                ) : (\r\n                    <div className=\"search-placeholder\">\r\n                        <div className=\"placeholder-icon\">üîç</div>\r\n                        <h3>Arama yapƒ±n</h3>\r\n                        <p>Herkese a√ßƒ±k dosyalarƒ± bulmak i√ßin yukarƒ±dan arama yapƒ±n.</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SearchEngine;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}