{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Burak\\\\Desktop\\\\cloud_mvp\\\\frontend\\\\src\\\\components\\\\ChatBox.jsx\",\n  _s = $RefreshSig$();\n// ChatBox.jsx - FIXED\nimport React, { useState, useEffect, useRef } from \"react\";\nimport \"./ChatBox.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ChatBox({\n  threadId,\n  currentUser,\n  selectedUser\n}) {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [text, setText] = useState(\"\");\n  const [file, setFile] = useState(null);\n  const [socket, setSocket] = useState(null);\n  const endRef = useRef(null);\n\n  // currentUser'ƒ±n string olduƒüundan emin ol\n  const currentUsername = typeof currentUser === 'string' ? currentUser : (currentUser === null || currentUser === void 0 ? void 0 : currentUser.username) || 'user';\n\n  // WebSocket connection\n  useEffect(() => {\n    if (!threadId) return;\n    const ws = new WebSocket(`ws://127.0.0.1:8000/ws/chat/${threadId}/`);\n    ws.onopen = () => {\n      console.log('WebSocket connected');\n    };\n    ws.onmessage = e => {\n      const data = JSON.parse(e.data);\n      if (data.type === \"reaction\") {\n        setMessages(prev => prev.map(m => {\n          if (m.id === data.id) {\n            let reactions = m.reactions ? [...m.reactions] : [];\n            const existingIndex = reactions.findIndex(r => r.user === data.user && r.emoji === data.emoji);\n            if (data.action === \"added\" && existingIndex === -1) {\n              reactions.push({\n                user: data.user,\n                emoji: data.emoji\n              });\n            } else if (data.action === \"removed\" && existingIndex !== -1) {\n              reactions.splice(existingIndex, 1);\n            }\n            return {\n              ...m,\n              reactions\n            };\n          }\n          return m;\n        }));\n      } else if (data.type === \"delete\") {\n        setMessages(prev => prev.filter(m => m.id !== data.id));\n      } else if (data.type === \"edit\") {\n        setMessages(prev => prev.map(m => m.id === data.id ? {\n          ...m,\n          message: data.text,\n          edited: true\n        } : m));\n      } else if (data.type === \"read\") {\n        setMessages(prev => prev.map(m => m.id === data.id ? {\n          ...m,\n          read: true\n        } : m));\n      } else {\n        setMessages(prev => [...prev, data]);\n      }\n    };\n    ws.onclose = () => {\n      console.log('WebSocket disconnected');\n    };\n    setSocket(ws);\n    return () => {\n      ws.close();\n    };\n  }, [threadId]);\n\n  // Demo mesajlarƒ±\n  useEffect(() => {\n    if (selectedUser) {\n      const demoMessages = [{\n        id: 1,\n        sender: selectedUser.username,\n        message: \"Selam! Nasƒ±lsƒ±n?\",\n        timestamp: new Date(Date.now() - 300000).toISOString(),\n        status: 'seen'\n      }, {\n        id: 2,\n        sender: currentUsername,\n        message: \"ƒ∞yiyim, te≈üekk√ºrler! Sen nasƒ±lsƒ±n?\",\n        timestamp: new Date(Date.now() - 180000).toISOString(),\n        status: 'seen'\n      }, {\n        id: 3,\n        sender: selectedUser.username,\n        message: \"Ben de iyiyim, saƒü ol!\",\n        timestamp: new Date(Date.now() - 60000).toISOString(),\n        status: 'delivered'\n      }];\n      setMessages(demoMessages);\n    } else {\n      setMessages([]);\n    }\n  }, [selectedUser, currentUsername]);\n  useEffect(() => {\n    var _endRef$current;\n    (_endRef$current = endRef.current) === null || _endRef$current === void 0 ? void 0 : _endRef$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n\n  // Mark messages as read\n  useEffect(() => {\n    messages.forEach(msg => {\n      if (!msg.read && msg.sender !== currentUsername) {\n        // Hem WebSocket hem API √ºzerinden g√∂nderiyoruz\n        socket === null || socket === void 0 ? void 0 : socket.send(JSON.stringify({\n          type: \"read\",\n          id: msg.id\n        }));\n        fetch(`http://127.0.0.1:8000/chat/read/${msg.id}/`, {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n          }\n        });\n      }\n    });\n  }, [messages, currentUsername, socket]);\n  const sendFile = async () => {\n    if (!file) return;\n    try {\n      const newMessage = {\n        id: Date.now(),\n        sender: currentUsername,\n        message: \"\",\n        file_url: URL.createObjectURL(file),\n        timestamp: new Date().toISOString(),\n        status: 'sent'\n      };\n      setMessages(prev => [...prev, newMessage]);\n      setFile(null);\n      setTimeout(() => {\n        setMessages(prev => prev.map(m => m.id === newMessage.id ? {\n          ...m,\n          status: 'delivered'\n        } : m));\n      }, 500);\n    } catch (error) {\n      console.error(\"Dosya g√∂nderilemedi:\", error);\n    }\n  };\n  const sendMessage = () => {\n    if (text.trim() && socket) {\n      // WebSocket √ºzerinden mesaj g√∂nder\n      socket.send(JSON.stringify({\n        type: \"message\",\n        message: text\n      }));\n      const newMessage = {\n        id: Date.now(),\n        sender: currentUsername,\n        message: text,\n        timestamp: new Date().toISOString(),\n        status: 'sent'\n      };\n      setMessages(prev => [...prev, newMessage]);\n      setText(\"\");\n      setTimeout(() => {\n        setMessages(prev => prev.map(m => m.id === newMessage.id ? {\n          ...m,\n          status: 'delivered'\n        } : m));\n        setTimeout(() => {\n          setMessages(prev => prev.map(m => m.id === newMessage.id ? {\n            ...m,\n            status: 'seen'\n          } : m));\n        }, 1000);\n      }, 500);\n    }\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n  const getStatusIcon = status => {\n    switch (status) {\n      case 'sent':\n        return '‚úì';\n      case 'delivered':\n        return '‚úì‚úì';\n      case 'seen':\n        return '‚úì‚úì ‚óè';\n      default:\n        return '';\n    }\n  };\n  const handleReaction = async (msg, emoji) => {\n    if (!socket) return;\n    const res = await fetch(`http://127.0.0.1:8000/chat/reaction/${msg.id}/`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      },\n      body: JSON.stringify({\n        emoji\n      })\n    });\n    if (res.ok) {\n      const data = await res.json();\n      socket.send(JSON.stringify({\n        type: \"reaction\",\n        id: msg.id,\n        emoji: emoji,\n        action: data.action || \"added\"\n      }));\n    }\n  };\n  const renderMessage = (msg, index) => {\n    const isMine = msg.sender === currentUsername;\n    const emojis = [\"‚ù§Ô∏è\", \"üòÇ\", \"üëç\", \"üî•\", \"üòÆ\", \"üò¢\"];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `message-bubble ${isMine ? 'own' : 'other'}`,\n      children: [!isMine && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-sender\",\n        children: msg.sender\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 21\n      }, this), msg.message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-text\",\n        children: msg.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 21\n      }, this), msg.file_url && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-file\",\n        children: /\\.(jpg|jpeg|png|gif|webp)$/i.test(msg.file_url) ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: msg.file_url,\n          alt: \"Dosya\",\n          className: \"message-image\",\n          onError: e => {\n            e.target.style.display = 'none';\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n          href: msg.file_url,\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          className: \"file-download-link\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-paperclip\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 33\n          }, this), \"Dosyay\\u0131 indir\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 21\n      }, this), msg.reactions && msg.reactions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reactions-container\",\n        children: msg.reactions.map((r, idx) => /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"reaction-bubble\",\n          children: r.emoji\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 21\n      }, this), isMine && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"emoji-buttons\",\n        children: emojis.map(emoji => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleReaction(msg, emoji),\n          className: \"emoji-button\",\n          children: emoji\n        }, emoji, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-time\",\n        children: [new Date(msg.timestamp).toLocaleTimeString('tr-TR', {\n          hour: '2-digit',\n          minute: '2-digit'\n        }), isMine && msg.status && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `message-status ${msg.status}`,\n          children: getStatusIcon(msg.status)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 17\n      }, this)]\n    }, msg.id || index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 13\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modern-chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-container\",\n      children: [messages.length > 0 ? messages.map(renderMessage) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty-chat-state\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-chat-icon\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-comment-dots\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Sohbete Ba\\u015Flay\\u0131n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.username, \" ile mesajla\\u015Fmaya ba\\u015Flay\\u0131n\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: endRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"file-upload-section\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"file-input-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"file-input-label\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-paperclip\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: file ? file.name : 'Dosya se√ß...'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            onChange: e => setFile(e.target.files[0]),\n            className: \"file-input-hidden\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 21\n        }, this), file && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: sendFile,\n          className: \"send-file-btn\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-upload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 29\n          }, this), \"G\\xF6nder\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message-input-section\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-input-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: text,\n          onChange: e => setText(e.target.value),\n          onKeyDown: handleKeyDown,\n          placeholder: \"Mesaj yaz\\u0131n...\",\n          className: \"message-input\",\n          rows: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: sendMessage,\n          disabled: !text.trim() || !socket,\n          className: \"send-message-btn\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-paper-plane\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 326,\n    columnNumber: 9\n  }, this);\n}\n_s(ChatBox, \"2CfYMQLaMCqY9OYffFP8WN4787Y=\");\n_c = ChatBox;\nvar _c;\n$RefreshReg$(_c, \"ChatBox\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","ChatBox","threadId","currentUser","selectedUser","_s","messages","setMessages","text","setText","file","setFile","socket","setSocket","endRef","currentUsername","username","ws","WebSocket","onopen","console","log","onmessage","e","data","JSON","parse","type","prev","map","m","id","reactions","existingIndex","findIndex","r","user","emoji","action","push","splice","filter","message","edited","read","onclose","close","demoMessages","sender","timestamp","Date","now","toISOString","status","_endRef$current","current","scrollIntoView","behavior","forEach","msg","send","stringify","fetch","method","headers","Authorization","localStorage","getItem","sendFile","newMessage","file_url","URL","createObjectURL","setTimeout","error","sendMessage","trim","handleKeyDown","key","shiftKey","preventDefault","getStatusIcon","handleReaction","res","body","ok","json","renderMessage","index","isMine","emojis","className","children","fileName","_jsxFileName","lineNumber","columnNumber","test","src","alt","onError","target","style","display","href","rel","length","idx","onClick","toLocaleTimeString","hour","minute","ref","name","onChange","files","value","onKeyDown","placeholder","rows","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Burak/Desktop/cloud_mvp/frontend/src/components/ChatBox.jsx"],"sourcesContent":["// ChatBox.jsx - FIXED\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport \"./ChatBox.css\";\r\n\r\nexport default function ChatBox({ threadId, currentUser, selectedUser }) {\r\n    const [messages, setMessages] = useState([]);\r\n    const [text, setText] = useState(\"\");\r\n    const [file, setFile] = useState(null);\r\n    const [socket, setSocket] = useState(null);\r\n    const endRef = useRef(null);\r\n\r\n    // currentUser'ƒ±n string olduƒüundan emin ol\r\n    const currentUsername = typeof currentUser === 'string' ? currentUser : currentUser?.username || 'user';\r\n\r\n    // WebSocket connection\r\n    useEffect(() => {\r\n        if (!threadId) return;\r\n\r\n        const ws = new WebSocket(`ws://127.0.0.1:8000/ws/chat/${threadId}/`);\r\n\r\n        ws.onopen = () => {\r\n            console.log('WebSocket connected');\r\n        };\r\n\r\n        ws.onmessage = (e) => {\r\n            const data = JSON.parse(e.data);\r\n\r\n            if (data.type === \"reaction\") {\r\n                setMessages((prev) =>\r\n                    prev.map((m) => {\r\n                        if (m.id === data.id) {\r\n                            let reactions = m.reactions ? [...m.reactions] : [];\r\n                            const existingIndex = reactions.findIndex(\r\n                                (r) => r.user === data.user && r.emoji === data.emoji\r\n                            );\r\n                            if (data.action === \"added\" && existingIndex === -1) {\r\n                                reactions.push({ user: data.user, emoji: data.emoji });\r\n                            } else if (data.action === \"removed\" && existingIndex !== -1) {\r\n                                reactions.splice(existingIndex, 1);\r\n                            }\r\n                            return { ...m, reactions };\r\n                        }\r\n                        return m;\r\n                    })\r\n                );\r\n            } else if (data.type === \"delete\") {\r\n                setMessages((prev) => prev.filter((m) => m.id !== data.id));\r\n            } else if (data.type === \"edit\") {\r\n                setMessages((prev) =>\r\n                    prev.map((m) =>\r\n                        m.id === data.id ? { ...m, message: data.text, edited: true } : m\r\n                    )\r\n                );\r\n            } else if (data.type === \"read\") {\r\n                setMessages((prev) =>\r\n                    prev.map((m) =>\r\n                        m.id === data.id ? { ...m, read: true } : m\r\n                    )\r\n                );\r\n            } else {\r\n                setMessages((prev) => [...prev, data]);\r\n            }\r\n        };\r\n\r\n        ws.onclose = () => {\r\n            console.log('WebSocket disconnected');\r\n        };\r\n\r\n        setSocket(ws);\r\n\r\n        return () => {\r\n            ws.close();\r\n        };\r\n    }, [threadId]);\r\n\r\n    // Demo mesajlarƒ±\r\n    useEffect(() => {\r\n        if (selectedUser) {\r\n            const demoMessages = [\r\n                {\r\n                    id: 1,\r\n                    sender: selectedUser.username,\r\n                    message: \"Selam! Nasƒ±lsƒ±n?\",\r\n                    timestamp: new Date(Date.now() - 300000).toISOString(),\r\n                    status: 'seen'\r\n                },\r\n                {\r\n                    id: 2,\r\n                    sender: currentUsername,\r\n                    message: \"ƒ∞yiyim, te≈üekk√ºrler! Sen nasƒ±lsƒ±n?\",\r\n                    timestamp: new Date(Date.now() - 180000).toISOString(),\r\n                    status: 'seen'\r\n                },\r\n                {\r\n                    id: 3,\r\n                    sender: selectedUser.username,\r\n                    message: \"Ben de iyiyim, saƒü ol!\",\r\n                    timestamp: new Date(Date.now() - 60000).toISOString(),\r\n                    status: 'delivered'\r\n                }\r\n            ];\r\n            setMessages(demoMessages);\r\n        } else {\r\n            setMessages([]);\r\n        }\r\n    }, [selectedUser, currentUsername]);\r\n\r\n    useEffect(() => {\r\n        endRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    }, [messages]);\r\n\r\n    // Mark messages as read\r\n    useEffect(() => {\r\n        messages.forEach((msg) => {\r\n            if (!msg.read && msg.sender !== currentUsername) {\r\n                // Hem WebSocket hem API √ºzerinden g√∂nderiyoruz\r\n                socket?.send(JSON.stringify({ type: \"read\", id: msg.id }));\r\n                fetch(`http://127.0.0.1:8000/chat/read/${msg.id}/`, {\r\n                    method: \"POST\",\r\n                    headers: {\r\n                        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n                    },\r\n                });\r\n            }\r\n        });\r\n    }, [messages, currentUsername, socket]);\r\n\r\n    const sendFile = async () => {\r\n        if (!file) return;\r\n\r\n        try {\r\n            const newMessage = {\r\n                id: Date.now(),\r\n                sender: currentUsername,\r\n                message: \"\",\r\n                file_url: URL.createObjectURL(file),\r\n                timestamp: new Date().toISOString(),\r\n                status: 'sent'\r\n            };\r\n\r\n            setMessages(prev => [...prev, newMessage]);\r\n            setFile(null);\r\n\r\n            setTimeout(() => {\r\n                setMessages(prev =>\r\n                    prev.map(m =>\r\n                        m.id === newMessage.id ? { ...m, status: 'delivered' } : m\r\n                    )\r\n                );\r\n            }, 500);\r\n        } catch (error) {\r\n            console.error(\"Dosya g√∂nderilemedi:\", error);\r\n        }\r\n    };\r\n\r\n    const sendMessage = () => {\r\n        if (text.trim() && socket) {\r\n            // WebSocket √ºzerinden mesaj g√∂nder\r\n            socket.send(JSON.stringify({\r\n                type: \"message\",\r\n                message: text\r\n            }));\r\n\r\n            const newMessage = {\r\n                id: Date.now(),\r\n                sender: currentUsername,\r\n                message: text,\r\n                timestamp: new Date().toISOString(),\r\n                status: 'sent'\r\n            };\r\n\r\n            setMessages(prev => [...prev, newMessage]);\r\n            setText(\"\");\r\n\r\n            setTimeout(() => {\r\n                setMessages(prev =>\r\n                    prev.map(m =>\r\n                        m.id === newMessage.id ? { ...m, status: 'delivered' } : m\r\n                    )\r\n                );\r\n\r\n                setTimeout(() => {\r\n                    setMessages(prev =>\r\n                        prev.map(m =>\r\n                            m.id === newMessage.id ? { ...m, status: 'seen' } : m\r\n                        )\r\n                    );\r\n                }, 1000);\r\n            }, 500);\r\n        }\r\n    };\r\n\r\n    const handleKeyDown = (e) => {\r\n        if (e.key === 'Enter' && !e.shiftKey) {\r\n            e.preventDefault();\r\n            sendMessage();\r\n        }\r\n    };\r\n\r\n    const getStatusIcon = (status) => {\r\n        switch (status) {\r\n            case 'sent':\r\n                return '‚úì';\r\n            case 'delivered':\r\n                return '‚úì‚úì';\r\n            case 'seen':\r\n                return '‚úì‚úì ‚óè';\r\n            default:\r\n                return '';\r\n        }\r\n    };\r\n\r\n    const handleReaction = async (msg, emoji) => {\r\n        if (!socket) return;\r\n\r\n        const res = await fetch(`http://127.0.0.1:8000/chat/reaction/${msg.id}/`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n            },\r\n            body: JSON.stringify({ emoji }),\r\n        });\r\n\r\n        if (res.ok) {\r\n            const data = await res.json();\r\n            socket.send(\r\n                JSON.stringify({\r\n                    type: \"reaction\",\r\n                    id: msg.id,\r\n                    emoji: emoji,\r\n                    action: data.action || \"added\",\r\n                })\r\n            );\r\n        }\r\n    };\r\n\r\n    const renderMessage = (msg, index) => {\r\n        const isMine = msg.sender === currentUsername;\r\n        const emojis = [\"‚ù§Ô∏è\", \"üòÇ\", \"üëç\", \"üî•\", \"üòÆ\", \"üò¢\"];\r\n\r\n        return (\r\n            <div\r\n                key={msg.id || index}\r\n                className={`message-bubble ${isMine ? 'own' : 'other'}`}\r\n            >\r\n                {!isMine && (\r\n                    <div className=\"message-sender\">{msg.sender}</div>\r\n                )}\r\n\r\n                {msg.message && (\r\n                    <div className=\"message-text\">\r\n                        {msg.message}\r\n                    </div>\r\n                )}\r\n                {msg.file_url && (\r\n                    <div className=\"message-file\">\r\n                        {/\\.(jpg|jpeg|png|gif|webp)$/i.test(msg.file_url) ? (\r\n                            <img\r\n                                src={msg.file_url}\r\n                                alt=\"Dosya\"\r\n                                className=\"message-image\"\r\n                                onError={(e) => {\r\n                                    e.target.style.display = 'none';\r\n                                }}\r\n                            />\r\n                        ) : (\r\n                            <a\r\n                                href={msg.file_url}\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"file-download-link\"\r\n                            >\r\n                                <i className=\"fas fa-paperclip\"></i>\r\n                                Dosyayƒ± indir\r\n                            </a>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Reactionlar */}\r\n                {msg.reactions && msg.reactions.length > 0 && (\r\n                    <div className=\"reactions-container\">\r\n                        {msg.reactions.map((r, idx) => (\r\n                            <span\r\n                                key={idx}\r\n                                className=\"reaction-bubble\"\r\n                            >\r\n                                {r.emoji}\r\n                            </span>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Emoji butonlarƒ± - sadece kendi mesajlarƒ±mƒ±z i√ßin */}\r\n                {isMine && (\r\n                    <div className=\"emoji-buttons\">\r\n                        {emojis.map((emoji) => (\r\n                            <button\r\n                                key={emoji}\r\n                                onClick={() => handleReaction(msg, emoji)}\r\n                                className=\"emoji-button\"\r\n                            >\r\n                                {emoji}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"message-time\">\r\n                    {new Date(msg.timestamp).toLocaleTimeString('tr-TR', {\r\n                        hour: '2-digit',\r\n                        minute: '2-digit'\r\n                    })}\r\n                    {isMine && msg.status && (\r\n                        <span className={`message-status ${msg.status}`}>\r\n                            {getStatusIcon(msg.status)}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"modern-chat-container\">\r\n            <div className=\"messages-container\">\r\n                {messages.length > 0 ? (\r\n                    messages.map(renderMessage)\r\n                ) : (\r\n                    <div className=\"empty-chat-state\">\r\n                        <div className=\"empty-chat-icon\">\r\n                            <i className=\"fas fa-comment-dots\"></i>\r\n                        </div>\r\n                        <h3>Sohbete Ba≈ülayƒ±n</h3>\r\n                        <p>{selectedUser?.username} ile mesajla≈ümaya ba≈ülayƒ±n</p>\r\n                    </div>\r\n                )}\r\n                <div ref={endRef} />\r\n            </div>\r\n\r\n            <div className=\"file-upload-section\">\r\n                <div className=\"file-input-wrapper\">\r\n                    <label className=\"file-input-label\">\r\n                        <i className=\"fas fa-paperclip\"></i>\r\n                        <span>{file ? file.name : 'Dosya se√ß...'}</span>\r\n                        <input\r\n                            type=\"file\"\r\n                            onChange={(e) => setFile(e.target.files[0])}\r\n                            className=\"file-input-hidden\"\r\n                        />\r\n                    </label>\r\n                    {file && (\r\n                        <button\r\n                            onClick={sendFile}\r\n                            className=\"send-file-btn\"\r\n                        >\r\n                            <i className=\"fas fa-upload\"></i>\r\n                            G√∂nder\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"message-input-section\">\r\n                <div className=\"message-input-wrapper\">\r\n                    <textarea\r\n                        value={text}\r\n                        onChange={(e) => setText(e.target.value)}\r\n                        onKeyDown={handleKeyDown}\r\n                        placeholder=\"Mesaj yazƒ±n...\"\r\n                        className=\"message-input\"\r\n                        rows=\"1\"\r\n                    />\r\n                    <button\r\n                        onClick={sendMessage}\r\n                        disabled={!text.trim() || !socket}\r\n                        className=\"send-message-btn\"\r\n                    >\r\n                        <i className=\"fas fa-paper-plane\"></i>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}