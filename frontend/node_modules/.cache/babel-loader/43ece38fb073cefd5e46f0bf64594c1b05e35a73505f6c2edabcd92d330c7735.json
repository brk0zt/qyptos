{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Routes,Route,Navigate}from'react-router-dom';import{AuthProvider,useAuth}from'./AuthContext';import{MemoryProvider}from'./components/MemoryContext';import LoginSignup from'./components/LoginSignup';import Dashboard from'./components/Dashboard';import'./index.css';import GlobalProtection from'./components/GlobalProtection';// Ana uygulama bileşeni\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){return/*#__PURE__*/_jsxs(AuthProvider,{children:[/*#__PURE__*/_jsx(GlobalProtection,{}),/*#__PURE__*/_jsx(MemoryProvider,{children:/*#__PURE__*/_jsx(AppContent,{})})]});}// Uygulama içeriği bileşeni\nfunction AppContent(){const{user,loading}=useAuth();// loading'i buraya ekleyin\nconst[notifications,setNotifications]=useState([]);// Token kontrolü\nuseEffect(()=>{const checkTokenExpiry=()=>{const token=localStorage.getItem('token');if(token){try{const payload=JSON.parse(atob(token.split('.')[1]));const expiry=payload.exp*1000;if(Date.now()>=expiry){localStorage.removeItem('token');localStorage.removeItem('refresh');window.location.href='/login';}}catch(error){console.error('Token decode hatası:',error);}}};const intervalId=setInterval(checkTokenExpiry,60000);return()=>clearInterval(intervalId);},[]);const handleKayit=async kayitData=>{try{const response=await fetch('http://localhost:8001/api/auth/signup/',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(kayitData)});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();return data;}catch(error){console.error('Signup error:',error);throw error;}};// Auth yükleniyorsa loading göster\nif(loading){return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',height:'100vh',background:'radial-gradient(circle at top left, rgba(59, 130, 246, 0.15) 5%, transparent 65%), radial-gradient(circle at bottom right, rgba(0, 206, 209, 0.1) 5%, transparent 65%), #050505'},children:/*#__PURE__*/_jsxs(\"div\",{style:{color:'white',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",style:{width:'48px',height:'48px',border:'4px solid #e5e7eb',borderTop:'4px solid #3b82f6',borderRadius:'50%',animation:'spin 1s linear infinite',margin:'0 auto 20px'}}),/*#__PURE__*/_jsx(\"p\",{children:\"Y\\xFCkleniyor...\"})]})});}return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:!user?/*#__PURE__*/_jsx(LoginSignup,{onKayit:handleKayit}):/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:user?/*#__PURE__*/_jsx(Dashboard,{notifications:notifications}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:user?\"/dashboard\":\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/login.html\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","Routes","Route","Navigate","AuthProvider","useAuth","MemoryProvider","LoginSignup","Dashboard","GlobalProtection","jsx","_jsx","jsxs","_jsxs","App","children","AppContent","user","loading","notifications","setNotifications","checkTokenExpiry","token","localStorage","getItem","payload","JSON","parse","atob","split","expiry","exp","Date","now","removeItem","window","location","href","error","console","intervalId","setInterval","clearInterval","handleKayit","kayitData","response","fetch","method","headers","body","stringify","ok","Error","concat","status","data","json","style","display","justifyContent","alignItems","height","background","color","textAlign","className","width","border","borderTop","borderRadius","animation","margin","path","element","onKayit","to","replace"],"sources":["C:/Users/Burak/Desktop/cloud_mvp/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Routes, Route, Navigate } from 'react-router-dom';\r\nimport { AuthProvider, useAuth } from './AuthContext'; \r\nimport { MemoryProvider } from './components/MemoryContext'; \r\nimport LoginSignup from './components/LoginSignup';\r\nimport Dashboard from './components/Dashboard';\r\nimport './index.css';\r\nimport GlobalProtection from './components/GlobalProtection';\r\n\r\n\r\n// Ana uygulama bileşeni\r\nfunction App() {\r\n    return (\r\n        <AuthProvider>\r\n            <GlobalProtection />\r\n            <MemoryProvider>\r\n                <AppContent />\r\n            </MemoryProvider>\r\n        </AuthProvider>\r\n    );\r\n}\r\n\r\n// Uygulama içeriği bileşeni\r\nfunction AppContent() {\r\n    const { user, loading } = useAuth(); // loading'i buraya ekleyin\r\n    const [notifications, setNotifications] = useState([]);\r\n\r\n    // Token kontrolü\r\n    useEffect(() => {\r\n        const checkTokenExpiry = () => {\r\n            const token = localStorage.getItem('token');\r\n            if (token) {\r\n                try {\r\n                    const payload = JSON.parse(atob(token.split('.')[1]));\r\n                    const expiry = payload.exp * 1000;\r\n                    if (Date.now() >= expiry) {\r\n                        localStorage.removeItem('token');\r\n                        localStorage.removeItem('refresh');\r\n                        window.location.href = '/login';\r\n                    }\r\n                } catch (error) {\r\n                    console.error('Token decode hatası:', error);\r\n                }\r\n            }\r\n        };\r\n\r\n        const intervalId = setInterval(checkTokenExpiry, 60000);\r\n        return () => clearInterval(intervalId);\r\n    }, []);\r\n\r\n    const handleKayit = async (kayitData) => {\r\n        try {\r\n            const response = await fetch('http://localhost:8001/api/auth/signup/', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(kayitData)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n\r\n            const data = await response.json();\r\n            return data;\r\n\r\n        } catch (error) {\r\n            console.error('Signup error:', error);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    // Auth yükleniyorsa loading göster\r\n    if (loading) {\r\n        return (\r\n            <div style={{\r\n                display: 'flex',\r\n                justifyContent: 'center',\r\n                alignItems: 'center',\r\n                height: '100vh',\r\n                background: 'radial-gradient(circle at top left, rgba(59, 130, 246, 0.15) 5%, transparent 65%), radial-gradient(circle at bottom right, rgba(0, 206, 209, 0.1) 5%, transparent 65%), #050505'\r\n            }}>\r\n                <div style={{ color: 'white', textAlign: 'center' }}>\r\n                    <div className=\"loading-spinner\" style={{\r\n                        width: '48px',\r\n                        height: '48px',\r\n                        border: '4px solid #e5e7eb',\r\n                        borderTop: '4px solid #3b82f6',\r\n                        borderRadius: '50%',\r\n                        animation: 'spin 1s linear infinite',\r\n                        margin: '0 auto 20px'\r\n                    }}></div>\r\n                    <p>Yükleniyor...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Routes>\r\n            <Route\r\n                path=\"/login\"\r\n                element={!user ? <LoginSignup onKayit={handleKayit} /> : <Navigate to=\"/dashboard\" replace />}\r\n            />\r\n            <Route\r\n                path=\"/dashboard\"\r\n                element={user ? <Dashboard notifications={notifications} /> : <Navigate to=\"/login\" replace />}\r\n            />\r\n            <Route\r\n                path=\"/\"\r\n                element={<Navigate to={user ? \"/dashboard\" : \"/login\"} replace />}\r\n            />\r\n            <Route path=\"/login.html\" element={<Navigate to=\"/login\" replace />} />\r\n        </Routes>\r\n    );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}